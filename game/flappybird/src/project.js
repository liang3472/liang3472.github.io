require=function e(t,i,n){function o(c,p){if(!i[c]){if(!t[c]){var r="function"==typeof require&&require;if(!p&&r)return r(c,!0);if(s)return s(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var h=i[c]={exports:{}};t[c][0].call(h.exports,function(e){var i=t[c][1][e];return o(i?i:e)},h,h.exports,e,t,i,n)}return i[c].exports}for(var s="function"==typeof require&&require,c=0;c<n.length;c++)o(n[c]);return o}({Bird:[function(e,t,i){"use strict";cc._RFpush(t,"a410bm+yetBGJk7h/9h3fEf","Bird"),cc.Class({"extends":cc.Component,properties:{gravity:0,jumpSpeed:0,position:cc.Vec2},init:function(e){this.game=e},onStart:function(){this.node.setPosition(this.position),this.currV=0},onJump:function(){this.currV=this.jumpSpeed},onDrop:function(e){this.currV=this.currV+e*this.gravity,this.node.y-=this.currV}}),cc._RFpop()},{}],GameManager:[function(e,t,i){"use strict";cc._RFpush(t,"e0d17IFxZBDqIm8VXph9xGG","GameManager");var n=e("Bird"),o=e("Ground"),s=e("Sky"),c=e("PipeManager"),p={START:0,PLAYING:1,END:2};cc.Class({"extends":cc.Component,properties:{bird:n,ground:o,sky:s,menu:cc.Node,pipeMng:c,title:cc.Node},initConfig:function(){cc.director.setDisplayStats(!0)},onLoad:function(){this.initConfig(),this.pipeMng.init(this),this.toggleGameState(p.START),this.node.on("touchstart",function(e){this.currState===p.PLAYING&&this.bird.onJump()},this)},toggleGameState:function(e){switch(this.currState=e,this.currState){case p.START:this.title.active=!0,this.menu.active=!0;break;case p.END:this.title.active=!0,this.menu.active=!0,this.pipeMng.stopPipe();break;default:this.title.active=!1,this.menu.active=!1}},onGameOver:function(){this.toggleGameState(p.END)},clickStart:function(){this.toggleGameState(p.PLAYING),this.bird.onStart(),this.bird.onJump(),this.pipeMng.startPipe()},update:function(e){this.currState!==p.PLAYING&&this.currState!==p.END||(this.bird.node.y>this.ground.node.y?this.bird.onDrop(e):this.onGameOver())}}),cc._RFpop()},{Bird:"Bird",Ground:"Ground",PipeManager:"PipeManager",Sky:"Sky"}],Gloable:[function(e,t,i){"use strict";cc._RFpush(t,"f16b2yjtbhD9Y4b4ZLBBi8a","Gloable"),t.exports={pipes:[]},cc._RFpop()},{}],Ground:[function(e,t,i){"use strict";cc._RFpush(t,"857d3vuheNERIFp4v2WPf81","Ground"),cc.Class({"extends":cc.Component,properties:{xSpeed:0,xWidth:0},update:function(e){this.node.x<=this.xWidth?this.node.x=0:this.node.x+=e*this.xSpeed}}),cc._RFpop()},{}],MenuManager:[function(e,t,i){"use strict";cc._RFpush(t,"75783PEFa5I1IuR2iGETy4q","MenuManager"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}],PipeManager:[function(e,t,i){"use strict";cc._RFpush(t,"b6939HM5MJDiosqfcA7szNs","PipeManager");var n=e("Gloable");cc.Class({"extends":cc.Component,properties:{xSpeed:0,pipeNum:0,pipeLayer:cc.Node,pipePre:cc.Prefab,time:0},init:function(e){this.game=e,n.pipes=[],this._pipePool?this._pipePool.clear():this._pipePool=new cc.NodePool},startPipe:function(){this._cleanPipes(),this.schedule(this._createPipe,this.time,cc.macro.REPEAT_FOREVER,0)},_createPipe:function(){var e;e=this._pipePool.size()>0?this._pipePool.get():cc.instantiate(this.pipePre),e.setPosition(cc.p(this.pipeLayer.width/2+e.width/2,0)),this.pipeLayer.addChild(e);var t=e.getComponent("Pipe"),i=this.game.ground.node.y+100,o=this.game.node.height/2-100;t.init(this.game),t.setHight(i+Math.random()*(o-i)),t.setSpeed(this.xSpeed),n.pipes.push(t)},put:function(e){this._pipePool.put(e)},stopPipe:function(){this.unschedule(this._createPipe),n.pipes.map(function(e){cc.isValid(e)&&e.stopMove()})},_cleanPipes:function(){var e=this;n.pipes.map(function(t){cc.isValid(t)&&(e.pipeLayer.removeChild(t),t.destroy())}),n.pipes=[],this.pipeLayer.removeAllChildren()}}),cc._RFpop()},{Gloable:"Gloable"}],Pipe:[function(e,t,i){"use strict";cc._RFpush(t,"08de8KvSY5MALEP5HwCmdT7","Pipe");var n=e("Gloable");cc.Class({"extends":cc.Component,properties:{pipeUp:cc.Node,pipeDown:cc.Node},init:function(e){this.game=e,this._isPass=!1},setHight:function(e){this.node.y=e},setSpeed:function(e){this._speed=e},stopMove:function(){this._isStop=!0},checkHit:function(){if(this.node.parent){var e=!1,t=this.node.width,i=this.game.bird.node.width,n=this.game.bird.node.height,o=this.node.x-t/2,s=this.node.x+t/2,c=this.node.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.pipeUp.getPosition())).y,p=this.node.parent.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(this.pipeDown.getPosition())).y,r=this.node.parent.convertToNodeSpaceAR(this.game.node.convertToWorldSpaceAR(this.game.bird.node.getPosition())),a=r.x-i/2,h=r.x+i/2,d=r.y+n,u=r.y;d>=c&&h>=o&&a<=s&&(e=!0),u<=p&&h>=o&&a<=s&&(e=!0),a>s&&!this._isPass&&(this._isPass=!0),e&&this.game.onGameOver()}},checkOutSide:function(){var e=-this.node.parent.width/2;if(this.node.x<e-this.node.width){var t=n.pipes.shift();this.game.pipeMng.put(t.node)}},update:function(e){this.checkOutSide(),this.checkHit(),this._isStop||(this.node.x+=e*this._speed)}}),cc._RFpop()},{Gloable:"Gloable"}],Sky:[function(e,t,i){"use strict";cc._RFpush(t,"5b16cZVFShL8bhJI6gA5/Kb","Sky"),cc.Class({"extends":cc.Component,properties:{xSpeed:0,xWidth:0},update:function(e){this.node.x<=this.xWidth?this.node.x=0:this.node.x+=e*this.xSpeed}}),cc._RFpop()},{}],SoundManager:[function(e,t,i){"use strict";cc._RFpush(t,"a263djUEBNExYpNpVAVhcTf","SoundManager"),cc.Class({"extends":cc.Component,properties:{},onLoad:function(){}}),cc._RFpop()},{}]},{},["Pipe","Sky","MenuManager","Ground","SoundManager","Bird","PipeManager","GameManager","Gloable"]);